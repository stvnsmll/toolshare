<!DOCTYPE html>

<html lang="en">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- documentation at http://getbootstrap.com/docs/4.1/, alternative themes at https://bootswatch.com/ -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
        

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
        <link href="/static/styles_luggage.css" rel="stylesheet">
        <title>Found Luggage</title>
     
    </head>

    <body>
        <div class="card-container shadow-lg p-3 mb-5 bg-white">
            <div class="card-heading h3 text-center">You found my bag!</div>
            <hr>
            <div class="card-contents">
                <div class="pt-3">This bag belongs to:</div> 
                <div class="mx-auto h6" style="width: 100%; text-align: center;">
                    {{ owner }}
                </div>
                <div class="pt-3">Phone number:</div> 
                <div class="mx-auto h6" style="width: 100%; text-align: center;">
                    {{ phone }} <a href="tel:{{ phone }}"><i class='fas fa-phone'></i></a>
                </div>
                <div class="pt-3">Email address:</div> 
                <div class="mx-auto h6" style="width: 100%; text-align: center;">
                    <a href="mailto:{{ email }}">{{ email }} &nbsp;<i class='far fa-envelope'></i></a>
                </div>
                <div class="pt-3">Home address:</div> 
                <div class="mx-auto h6" style="width: 100%; text-align: center;">
                    {{ address }}
                </div>
                <div class="smallspace"></div>
                <div style="width: 100%; display: grid;">
                    <button type="button" class="btn btn-secondary m-2" onclick="getLocation()">Log the current location of this bag</button>
                    <button type="button" class="btn btn-success m-2">Tell {{ firstname }} that you have it!</button>
                </div>
                Bag ID: {{ bagID }}<br>
                IP Address: {{ ipaddress }}<br>
                <br>
                <div id="location"></div>
                <a id="maplink" href="https://www.google.com" target="_blank" style="display: none">show on map</a>
            </div>
        </div>
        <footer class="text-center fixed-bottom" style="height: 28px;">
            <div class="small copyright">
                &copy 2020 -
                <script type="text/JavaScript">
                    document.write(new Date().getFullYear());
                </script>
                / Steven Small / All Rights Reserved
            </div>
        </footer>
        <script>
            var x = document.getElementById("location");
            var maplinkID = document.getElementById("maplink");
            
            function getLocation() {
              if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
              } else { 
                x.innerHTML = "Geolocation is not supported by this browser.";
              }
            }
            
            function showPosition(position) {
                var latitude = position.coords.latitude
                var longitude = position.coords.longitude
                x.innerHTML = "Latitude: " + latitude + 
                "<br>Longitude: " + longitude;
                var maplink = "https://www.latlong.net/c/?lat=" + latitude + "&long=" + longitude
                maplinkID.href = maplink
                maplinkID.style.display = "block"
            }
            </script>
    </body>
</html>